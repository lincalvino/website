(function(){const e=document.querySelector("#book-search-input"),t=document.querySelector("#book-search-results");e.addEventListener("focus",n),e.addEventListener("keyup",s);function n(){e.removeEventListener("focus",n),e.required=!0,o("/narcissism/lunr.min.js"),o("/narcissism/search-data.min.468c5a3c389481fd877ef072c628cf2ea6a427fe2b50ecb27f04c79823b2c612.js",function(){e.readOnly=!1,e.required=!1,s()})}function s(){for(;t.firstChild;)t.removeChild(t.firstChild);if(!e.value)return;const n=lunr.tokenizer(e.value),s=window.bookSearch.idx.query(function(e){e.term(n,{boost:100}),e.term(n,{boost:10,wildcard:lunr.Query.wildcard.LEADING|lunr.Query.wildcard.TRAILING}),e.term(n,{editDistance:2})});s.slice(0,10).forEach(function(e){const n=window.bookSearch.pages[e.ref],s=document.createElement("li"),o=s.appendChild(document.createElement("a"));o.href=n.href,o.textContent=n.title,t.appendChild(s)})}function o(e,t){const n=document.createElement("script");n.defer=!0,n.src=e,n.onload=t,document.head.append(n)}})()